(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"Te/E":function(t,e,o){"use strict";o.r(e),o.d(e,"TodoModule",function(){return _});var s=o("iInd"),i=o("na2Z"),c=o("s7LF"),n=o("2Vo4"),r=o("lJxs"),d=o("/uUt");class a{}var l=o("UXun"),b=o("8Y7J"),u=o("IheW");const p="api/todos/";let h=(()=>{class t{constructor(t){this.http=t}getTodos(){return this.http.get(p)}createTodo(t){return this.http.post(p,t)}updateTodo(t){return this.http.put(p+t.id,t)}deleteTodo(t){return this.http.delete(p+t.id)}}return t.\u0275fac=function(e){return new(e||t)(b.Wb(u.b))},t.\u0275prov=b.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const f={todos:[],selectedTodoId:void 0,filter:{search:"",category:{isBusiness:!1,isPrivate:!1}}};let S=(()=>{class t extends class{constructor(t){this.state$=new n.a(t)}get state(){return this.state$.getValue()}select(t){return this.state$.asObservable().pipe(Object(r.a)(e=>t(e)),Object(d.a)())}setState(t){this.state$.next(Object.assign(Object.assign({},this.state),t))}}{constructor(t){super(f),this.apiService=t,this.todosFiltered$=this.select(t=>{return e=t.filter,t.todos.filter(t=>t.title.toUpperCase().indexOf(e.search.toUpperCase())>-1&&(!e.category.isBusiness||t.isBusiness)&&(!e.category.isPrivate||t.isPrivate));var e}),this.todosDone$=this.todosFiltered$.pipe(Object(r.a)(t=>t.filter(t=>t.isDone))),this.todosNotDone$=this.todosFiltered$.pipe(Object(r.a)(t=>t.filter(t=>!t.isDone))),this.filter$=this.select(t=>t.filter),this.selectedTodo$=this.select(t=>0===t.selectedTodoId?new a:t.todos.find(e=>e.id===t.selectedTodoId)).pipe(Object(l.a)({refCount:!0,bufferSize:1})),this.load()}selectTodo(t){this.setState({selectedTodoId:t.id})}initNewTodo(){this.setState({selectedTodoId:0})}clearSelectedTodo(){this.setState({selectedTodoId:void 0})}updateFilter(t){this.setState({filter:Object.assign(Object.assign({},this.state.filter),t)})}load(){this.apiService.getTodos().subscribe(t=>this.setState({todos:t}))}create(t){this.apiService.createTodo(t).subscribe(t=>{this.setState({todos:[...this.state.todos,t],selectedTodoId:t.id})})}update(t){this.apiService.updateTodo(t).subscribe(e=>{this.setState({todos:this.state.todos.map(o=>o.id===t.id?e:o)})})}delete(t){this.apiService.deleteTodo(t).subscribe(()=>{this.setState({selectedTodoId:void 0,todos:this.state.todos.filter(e=>e.id!==t.id)})})}}return t.\u0275fac=function(e){return new(e||t)(b.Wb(h))},t.\u0275prov=b.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var g=o("1G5W"),v=o("Kj3r"),T=o("I5Xj"),m=o("XNiG"),w=o("FUqk"),R=o("ygek"),y=o("Z5n+"),O=o("UnHg");let k=(()=>{class t{constructor(){this._destroy=new m.a,this.filterUpdate=new b.n,this.formGroup=new T.b({search:new T.a(""),category:new T.b({isBusiness:new T.a(!0),isPrivate:new T.a(!1)})})}set filter(t){this.formGroup.setValue(t,{emitEvent:!1})}ngOnInit(){this.formGroup.get("search").valueChanges.pipe(Object(g.a)(this._destroy),Object(v.a)(350)).subscribe(t=>{this.filterUpdate.emit(Object.assign(Object.assign({},this.formGroup.value),{search:t}))}),this.formGroup.get("category").valueChanges.pipe(Object(g.a)(this._destroy)).subscribe(t=>{this.filterUpdate.emit(Object.assign(Object.assign({},this.formGroup.value),{category:t}))})}ngOnDestroy(){this._destroy.next(),this._destroy.complete()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=b.Hb({type:t,selectors:[["webr-filter"]],inputs:{filter:"filter"},outputs:{filterUpdate:"filterUpdate"},decls:14,vars:1,consts:[[1,"d-flex","m-0",3,"formGroup"],["webr",""],[1,"label"],["webr","","type","search","formControlName","search"],["formGroupName","category",1,"form-check"],["webr-label",""],["webr","","type","checkbox","formControlName","isBusiness"],["webr","","type","checkbox","formControlName","isPrivate"]],template:function(t,e){1&t&&(b.Sb(0,"form",0),b.Sb(1,"label",1),b.Sb(2,"span",2),b.tc(3,"Pesquisas tarefa"),b.Rb(),b.Ob(4,"input",3),b.Rb(),b.Sb(5,"div",4),b.Sb(6,"label",5),b.Ob(7,"input",6),b.Sb(8,"span",2),b.tc(9,"Neg\xf3cios"),b.Rb(),b.Rb(),b.Sb(10,"label",5),b.Ob(11,"input",7),b.Sb(12,"span",2),b.tc(13,"Privado"),b.Rb(),b.Rb(),b.Rb(),b.Rb()),2&t&&b.hc("formGroup",e.formGroup)},directives:[c.x,c.p,c.j,w.a,R.a,c.c,c.o,c.h,c.k,y.a,O.a,c.a],encapsulation:2,changeDetection:0}),t})();var D=o("SVse");function $(t,e){1&t&&(b.Sb(0,"mark"),b.tc(1,"Business"),b.Rb())}function j(t,e){1&t&&(b.Sb(0,"mark"),b.tc(1,"Private"),b.Rb())}const I=function(t){return{active:t}};function C(t,e){if(1&t){const t=b.Tb();b.Sb(0,"li",1),b.Sb(1,"a",2),b.Zb("click",function(){b.nc(t);const o=e.$implicit;return b.cc().selectTodo.emit(o)}),b.tc(2),b.Rb(),b.rc(3,$,2,0,"mark",3),b.rc(4,j,2,0,"mark",3),b.Rb()}if(2&t){const t=e.$implicit,o=b.cc();b.hc("ngClass",b.jc(4,I,(null==o.selectedTodo?null:o.selectedTodo.id)===t.id)),b.Db(2),b.vc(" ",t.title," "),b.Db(1),b.hc("ngIf",t.isBusiness),b.Db(1),b.hc("ngIf",t.isPrivate)}}let x=(()=>{class t{constructor(){this.selectTodo=new b.n}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=b.Hb({type:t,selectors:[["webr-todo-list"]],inputs:{todos:"todos",selectedTodo:"selectedTodo"},outputs:{selectTodo:"selectTodo"},decls:2,vars:1,consts:[[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],["href","javascript:void(0)",3,"click"],[4,"ngIf"]],template:function(t,e){1&t&&(b.Sb(0,"ul"),b.rc(1,C,5,6,"li",0),b.Rb()),2&t&&(b.Db(1),b.hc("ngForOf",e.todos))},directives:[D.k,D.j,D.l],encapsulation:2}),t})();var N=o("wPhj"),P=o("tkdu"),F=o("lPny");function U(t,e){if(1&t){const t=b.Tb();b.Sb(0,"button",13),b.Zb("click",function(){return b.nc(t),b.cc().delete()}),b.tc(1,"Apagar"),b.Rb()}}let G=(()=>{class t{constructor(t){this.todosService=t}ngOnInit(){}submit(t){const e=Object.assign(Object.assign({},this.todo),t.value);e.id?this.todosService.update(e):this.todosService.create(e)}delete(){this.todosService.delete(this.todo)}onClose(){this.todosService.clearSelectedTodo()}}return t.\u0275fac=function(e){return new(e||t)(b.Nb(S))},t.\u0275cmp=b.Hb({type:t,selectors:[["webr-todo-detail"]],inputs:{todo:"todo"},decls:33,vars:7,consts:[["type","button",3,"click"],["form","ngForm"],["webr",""],[1,"label"],["webr","","type","text","name","title",3,"ngModel"],["webr","","for","text"],["key","error_outline"],["webr-label",""],["webr","","type","checkbox","name","isDone",3,"ngModel"],["webr","","type","checkbox","name","isBusiness",3,"ngModel"],["webr","","type","checkbox","name","isPrivate",3,"ngModel"],[3,"disabled","click"],[3,"click",4,"ngIf"],[3,"click"]],template:function(t,e){if(1&t){const t=b.Tb();b.Sb(0,"header"),b.Sb(1,"span"),b.tc(2),b.Rb(),b.Sb(3,"button",0),b.Zb("click",function(){return e.onClose()}),b.tc(4,"Fechar"),b.Rb(),b.Rb(),b.Sb(5,"section"),b.Sb(6,"form",null,1),b.Sb(8,"label",2),b.Sb(9,"span",3),b.tc(10,"Title"),b.Rb(),b.Ob(11,"input",4),b.Sb(12,"output",5),b.Ob(13,"webr-svg-icon",6),b.tc(14," Obrigat\xf3rio "),b.Rb(),b.Rb(),b.Sb(15,"label",7),b.Ob(16,"input",8),b.Sb(17,"span",3),b.tc(18,"Conclu\xedda"),b.Rb(),b.Rb(),b.Sb(19,"fieldset",2),b.Sb(20,"legend"),b.tc(21,"Categorias"),b.Rb(),b.Sb(22,"label",7),b.Ob(23,"input",9),b.Sb(24,"span",3),b.tc(25,"Neg\xf3cios"),b.Rb(),b.Rb(),b.Sb(26,"label",7),b.Ob(27,"input",10),b.Sb(28,"span",3),b.tc(29,"Privado"),b.Rb(),b.Rb(),b.Rb(),b.Sb(30,"button",11),b.Zb("click",function(){b.nc(t);const o=b.lc(7);return e.submit(o)}),b.tc(31," Salvar "),b.Rb(),b.rc(32,U,2,0,"button",12),b.Rb(),b.Rb()}if(2&t){const t=b.lc(7);b.Db(2),b.uc(null!=e.todo&&e.todo.id?"Editar tarefa":"Criar tarefa"),b.Db(9),b.hc("ngModel",null==e.todo?null:e.todo.title),b.Db(5),b.hc("ngModel",!(null==e.todo||!e.todo.isDone)&&(null==e.todo?null:e.todo.isDone)),b.Db(7),b.hc("ngModel",!(null==e.todo||!e.todo.isBusiness)&&(null==e.todo?null:e.todo.isBusiness)),b.Db(4),b.hc("ngModel",!(null==e.todo||!e.todo.isPrivate)&&(null==e.todo?null:e.todo.isPrivate)),b.Db(3),b.hc("disabled",!t.valid||!t.dirty),b.Db(2),b.hc("ngIf",null==e.todo?null:e.todo.id)}},directives:[c.x,c.p,c.q,w.a,R.a,c.c,c.o,c.r,N.a,P.a,y.a,O.a,c.a,F.a,D.l],encapsulation:2}),t})();function B(t,e){1&t&&b.Ob(0,"webr-todo-detail",4),2&t&&b.hc("todo",e.ngIf)}function Z(t,e){1&t&&b.Ob(0,"webr-todo-detail",4),2&t&&b.hc("todo",e.ngIf)}let M=(()=>{class t{constructor(t){this.todosState=t,this.todosDone$=this.todosState.todosDone$,this.todosNotDone$=this.todosState.todosNotDone$,this.selectedTodo$=this.todosState.selectedTodo$,this.filter$=this.todosState.filter$}selectTodo(t){this.todosState.selectTodo(t)}addTodo(){this.todosState.initNewTodo()}onFilterUpdate(t){this.todosState.updateFilter(t)}}return t.\u0275fac=function(e){return new(e||t)(b.Nb(S))},t.\u0275cmp=b.Hb({type:t,selectors:[["webr-todo"]],decls:22,vars:21,consts:[[1,"btn","btn-primary","btn-sm",3,"click"],[3,"filter","filterUpdate"],[3,"todo",4,"ngIf"],[3,"todos","selectedTodo","selectTodo"],[3,"todo"]],template:function(t,e){1&t&&(b.Sb(0,"button",0),b.Zb("click",function(){return e.addTodo()}),b.tc(1,"Nova"),b.Rb(),b.Sb(2,"webr-filter",1),b.Zb("filterUpdate",function(t){return e.onFilterUpdate(t)}),b.dc(3,"async"),b.Rb(),b.rc(4,B,1,1,"webr-todo-detail",2),b.dc(5,"async"),b.Sb(6,"article"),b.Sb(7,"section"),b.Sb(8,"h2"),b.tc(9,"Tarefas"),b.Rb(),b.Sb(10,"webr-todo-list",3),b.Zb("selectTodo",function(t){return e.selectTodo(t)}),b.dc(11,"async"),b.dc(12,"async"),b.Rb(),b.Rb(),b.Sb(13,"section"),b.Sb(14,"h2"),b.tc(15,"Tarefa conclu\xeddas"),b.Rb(),b.Sb(16,"webr-todo-list",3),b.Zb("selectTodo",function(t){return e.selectTodo(t)}),b.dc(17,"async"),b.dc(18,"async"),b.Rb(),b.Rb(),b.Rb(),b.Sb(19,"aside"),b.rc(20,Z,1,1,"webr-todo-detail",2),b.dc(21,"async"),b.Rb()),2&t&&(b.Db(2),b.hc("filter",b.ec(3,7,e.filter$)),b.Db(2),b.hc("ngIf",b.ec(5,9,e.selectedTodo$)),b.Db(6),b.hc("todos",b.ec(11,11,e.todosNotDone$))("selectedTodo",b.ec(12,13,e.selectedTodo$)),b.Db(6),b.hc("todos",b.ec(17,15,e.todosDone$))("selectedTodo",b.ec(18,17,e.selectedTodo$)),b.Db(4),b.hc("ngIf",b.ec(21,19,e.selectedTodo$)))},directives:[k,D.l,x,G],pipes:[D.b],encapsulation:2}),t})();o("FfVP");const J=[{path:"",component:M}];let _=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=b.Lb({type:t}),t.\u0275inj=b.Kb({imports:[[D.c,c.l,T.c,i.c.forRoot({icons:i.a,sizes:{md:"24px"}}),c.v,s.a.forChild(J)]]}),t})()}}]);