(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"Te/E":function(t,e,o){"use strict";o.r(e),o.d(e,"TodoModule",function(){return _});var s=o("iInd"),i=o("na2Z"),c=o("s7LF"),n=o("8Y7J"),r=o("IheW");const d="api/todos/";let a=(()=>{class t{constructor(t){this.http=t}getTodos(){return this.http.get(d)}createTodo(t){return this.http.post(d,t)}updateTodo(t){return this.http.put(d+t.id,t)}deleteTodo(t){return this.http.delete(d+t.id)}}return t.\u0275fac=function(e){return new(e||t)(n.Wb(r.b))},t.\u0275prov=n.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var l=o("lJxs"),b=o("UXun"),u=o("2Vo4"),p=o("/uUt");class h{}const f={todos:[],selectedTodoId:void 0,filter:{search:"",category:{isBusiness:!1,isPrivate:!1}}};let S=(()=>{class t extends class{constructor(t){this.state$=new u.a(t)}get state(){return this.state$.getValue()}select(t){return this.state$.asObservable().pipe(Object(l.a)(e=>t(e)),Object(p.a)())}setState(t){this.state$.next(Object.assign(Object.assign({},this.state),t))}}{constructor(t){super(f),this.apiService=t,this.todosFiltered$=this.select(t=>{return e=t.filter,t.todos.filter(t=>t.title.toUpperCase().indexOf(e.search.toUpperCase())>-1&&(!e.category.isBusiness||t.isBusiness)&&(!e.category.isPrivate||t.isPrivate));var e}),this.todosDone$=this.todosFiltered$.pipe(Object(l.a)(t=>t.filter(t=>t.isDone))),this.todosNotDone$=this.todosFiltered$.pipe(Object(l.a)(t=>t.filter(t=>!t.isDone))),this.filter$=this.select(t=>t.filter),this.selectedTodo$=this.select(t=>0===t.selectedTodoId?new h:t.todos.find(e=>e.id===t.selectedTodoId)).pipe(Object(b.a)({refCount:!0,bufferSize:1})),this.load()}selectTodo(t){this.setState({selectedTodoId:t.id})}initNewTodo(){this.setState({selectedTodoId:0})}clearSelectedTodo(){this.setState({selectedTodoId:void 0})}updateFilter(t){this.setState({filter:Object.assign(Object.assign({},this.state.filter),t)})}load(){this.apiService.getTodos().subscribe(t=>this.setState({todos:t}))}create(t){this.apiService.createTodo(t).subscribe(t=>{this.setState({todos:[...this.state.todos,t],selectedTodoId:t.id})})}update(t){this.apiService.updateTodo(t).subscribe(e=>{this.setState({todos:this.state.todos.map(o=>o.id===t.id?e:o)})})}delete(t){this.apiService.deleteTodo(t).subscribe(()=>{this.setState({selectedTodoId:void 0,todos:this.state.todos.filter(e=>e.id!==t.id)})})}}return t.\u0275fac=function(e){return new(e||t)(n.Wb(a))},t.\u0275prov=n.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var g=o("1G5W"),v=o("Kj3r"),T=o("I5Xj"),m=o("XNiG"),w=o("FUqk"),R=o("ygek"),y=o("Z5n+"),O=o("UnHg");let k=(()=>{class t{constructor(){this._destroy=new m.a,this.filterUpdate=new n.n,this.formGroup=new T.b({search:new T.a(""),category:new T.b({isBusiness:new T.a(!0),isPrivate:new T.a(!1)})})}set filter(t){this.formGroup.setValue(t,{emitEvent:!1})}ngOnInit(){this.formGroup.get("search").valueChanges.pipe(Object(g.a)(this._destroy),Object(v.a)(350)).subscribe(t=>{this.filterUpdate.emit(Object.assign(Object.assign({},this.formGroup.value),{search:t}))}),this.formGroup.get("category").valueChanges.pipe(Object(g.a)(this._destroy)).subscribe(t=>{this.filterUpdate.emit(Object.assign(Object.assign({},this.formGroup.value),{category:t}))})}ngOnDestroy(){this._destroy.next(),this._destroy.complete()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.Hb({type:t,selectors:[["webr-filter"]],inputs:{filter:"filter"},outputs:{filterUpdate:"filterUpdate"},decls:14,vars:1,consts:[[1,"d-flex","m-0",3,"formGroup"],["webr",""],[1,"label"],["webr","","type","search","formControlName","search"],["formGroupName","category",1,"form-check"],["webr-label",""],["webr","","type","checkbox","formControlName","isBusiness"],["webr","","type","checkbox","formControlName","isPrivate"]],template:function(t,e){1&t&&(n.Sb(0,"form",0),n.Sb(1,"label",1),n.Sb(2,"span",2),n.tc(3,"Pesquisas tarefa"),n.Rb(),n.Ob(4,"input",3),n.Rb(),n.Sb(5,"div",4),n.Sb(6,"label",5),n.Ob(7,"input",6),n.Sb(8,"span",2),n.tc(9,"Neg\xf3cios"),n.Rb(),n.Rb(),n.Sb(10,"label",5),n.Ob(11,"input",7),n.Sb(12,"span",2),n.tc(13,"Privado"),n.Rb(),n.Rb(),n.Rb(),n.Rb()),2&t&&n.hc("formGroup",e.formGroup)},directives:[c.x,c.p,c.j,w.a,R.a,c.c,c.o,c.h,c.k,y.a,O.a,c.a],encapsulation:2,changeDetection:0}),t})();var D=o("SVse");function $(t,e){1&t&&(n.Sb(0,"mark"),n.tc(1,"Business"),n.Rb())}function j(t,e){1&t&&(n.Sb(0,"mark"),n.tc(1,"Private"),n.Rb())}const I=function(t){return{active:t}};function C(t,e){if(1&t){const t=n.Tb();n.Sb(0,"li",1),n.Sb(1,"a",2),n.Zb("click",function(){n.nc(t);const o=e.$implicit;return n.cc().selectTodo.emit(o)}),n.tc(2),n.Rb(),n.rc(3,$,2,0,"mark",3),n.rc(4,j,2,0,"mark",3),n.Rb()}if(2&t){const t=e.$implicit,o=n.cc();n.hc("ngClass",n.jc(4,I,(null==o.selectedTodo?null:o.selectedTodo.id)===t.id)),n.Db(2),n.vc(" ",t.title," "),n.Db(1),n.hc("ngIf",t.isBusiness),n.Db(1),n.hc("ngIf",t.isPrivate)}}let x=(()=>{class t{constructor(){this.selectTodo=new n.n}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.Hb({type:t,selectors:[["webr-todo-list"]],inputs:{todos:"todos",selectedTodo:"selectedTodo"},outputs:{selectTodo:"selectTodo"},decls:2,vars:1,consts:[[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],["href","javascript:void(0)",3,"click"],[4,"ngIf"]],template:function(t,e){1&t&&(n.Sb(0,"ul"),n.rc(1,C,5,6,"li",0),n.Rb()),2&t&&(n.Db(1),n.hc("ngForOf",e.todos))},directives:[D.k,D.j,D.l],encapsulation:2}),t})();var N=o("wPhj"),P=o("tkdu"),F=o("lPny");function U(t,e){if(1&t){const t=n.Tb();n.Sb(0,"button",13),n.Zb("click",function(){return n.nc(t),n.cc().delete()}),n.tc(1,"Apagar"),n.Rb()}}let G=(()=>{class t{constructor(t){this.todosService=t}ngOnInit(){}submit(t){const e=Object.assign(Object.assign({},this.todo),t.value);e.id?this.todosService.update(e):this.todosService.create(e)}delete(){this.todosService.delete(this.todo)}onClose(){this.todosService.clearSelectedTodo()}}return t.\u0275fac=function(e){return new(e||t)(n.Nb(S))},t.\u0275cmp=n.Hb({type:t,selectors:[["webr-todo-detail"]],inputs:{todo:"todo"},decls:33,vars:7,consts:[["type","button",3,"click"],["form","ngForm"],["webr",""],[1,"label"],["webr","","type","text","name","title",3,"ngModel"],["webr","","for","text"],["key","error_outline"],["webr-label",""],["webr","","type","checkbox","name","isDone",3,"ngModel"],["webr","","type","checkbox","name","isBusiness",3,"ngModel"],["webr","","type","checkbox","name","isPrivate",3,"ngModel"],[3,"disabled","click"],[3,"click",4,"ngIf"],[3,"click"]],template:function(t,e){if(1&t){const t=n.Tb();n.Sb(0,"header"),n.Sb(1,"span"),n.tc(2),n.Rb(),n.Sb(3,"button",0),n.Zb("click",function(){return e.onClose()}),n.tc(4,"Fechar"),n.Rb(),n.Rb(),n.Sb(5,"section"),n.Sb(6,"form",null,1),n.Sb(8,"label",2),n.Sb(9,"span",3),n.tc(10,"Title"),n.Rb(),n.Ob(11,"input",4),n.Sb(12,"output",5),n.Ob(13,"webr-svg-icon",6),n.tc(14," Obrigat\xf3rio "),n.Rb(),n.Rb(),n.Sb(15,"label",7),n.Ob(16,"input",8),n.Sb(17,"span",3),n.tc(18,"Conclu\xedda"),n.Rb(),n.Rb(),n.Sb(19,"fieldset",2),n.Sb(20,"legend"),n.tc(21,"Categorias"),n.Rb(),n.Sb(22,"label",7),n.Ob(23,"input",9),n.Sb(24,"span",3),n.tc(25,"Neg\xf3cios"),n.Rb(),n.Rb(),n.Sb(26,"label",7),n.Ob(27,"input",10),n.Sb(28,"span",3),n.tc(29,"Privado"),n.Rb(),n.Rb(),n.Rb(),n.Sb(30,"button",11),n.Zb("click",function(){n.nc(t);const o=n.lc(7);return e.submit(o)}),n.tc(31," Salvar "),n.Rb(),n.rc(32,U,2,0,"button",12),n.Rb(),n.Rb()}if(2&t){const t=n.lc(7);n.Db(2),n.uc(null!=e.todo&&e.todo.id?"Editar tarefa":"Criar tarefa"),n.Db(9),n.hc("ngModel",null==e.todo?null:e.todo.title),n.Db(5),n.hc("ngModel",!(null==e.todo||!e.todo.isDone)&&(null==e.todo?null:e.todo.isDone)),n.Db(7),n.hc("ngModel",!(null==e.todo||!e.todo.isBusiness)&&(null==e.todo?null:e.todo.isBusiness)),n.Db(4),n.hc("ngModel",!(null==e.todo||!e.todo.isPrivate)&&(null==e.todo?null:e.todo.isPrivate)),n.Db(3),n.hc("disabled",!t.valid||!t.dirty),n.Db(2),n.hc("ngIf",null==e.todo?null:e.todo.id)}},directives:[c.x,c.p,c.q,w.a,R.a,c.c,c.o,c.r,N.a,P.a,y.a,O.a,c.a,F.a,D.l],encapsulation:2}),t})();function B(t,e){1&t&&n.Ob(0,"webr-todo-detail",4),2&t&&n.hc("todo",e.ngIf)}function Z(t,e){1&t&&n.Ob(0,"webr-todo-detail",4),2&t&&n.hc("todo",e.ngIf)}let M=(()=>{class t{constructor(t){this.todosState=t,this.todosDone$=this.todosState.todosDone$,this.todosNotDone$=this.todosState.todosNotDone$,this.selectedTodo$=this.todosState.selectedTodo$,this.filter$=this.todosState.filter$}selectTodo(t){this.todosState.selectTodo(t)}addTodo(){this.todosState.initNewTodo()}onFilterUpdate(t){this.todosState.updateFilter(t)}}return t.\u0275fac=function(e){return new(e||t)(n.Nb(S))},t.\u0275cmp=n.Hb({type:t,selectors:[["webr-todo"]],decls:22,vars:21,consts:[[1,"btn","btn-primary","btn-sm",3,"click"],[3,"filter","filterUpdate"],[3,"todo",4,"ngIf"],[3,"todos","selectedTodo","selectTodo"],[3,"todo"]],template:function(t,e){1&t&&(n.Sb(0,"button",0),n.Zb("click",function(){return e.addTodo()}),n.tc(1,"Nova"),n.Rb(),n.Sb(2,"webr-filter",1),n.Zb("filterUpdate",function(t){return e.onFilterUpdate(t)}),n.dc(3,"async"),n.Rb(),n.rc(4,B,1,1,"webr-todo-detail",2),n.dc(5,"async"),n.Sb(6,"article"),n.Sb(7,"section"),n.Sb(8,"h2"),n.tc(9,"Tarefas"),n.Rb(),n.Sb(10,"webr-todo-list",3),n.Zb("selectTodo",function(t){return e.selectTodo(t)}),n.dc(11,"async"),n.dc(12,"async"),n.Rb(),n.Rb(),n.Sb(13,"section"),n.Sb(14,"h2"),n.tc(15,"Tarefa conclu\xeddas"),n.Rb(),n.Sb(16,"webr-todo-list",3),n.Zb("selectTodo",function(t){return e.selectTodo(t)}),n.dc(17,"async"),n.dc(18,"async"),n.Rb(),n.Rb(),n.Rb(),n.Sb(19,"aside"),n.rc(20,Z,1,1,"webr-todo-detail",2),n.dc(21,"async"),n.Rb()),2&t&&(n.Db(2),n.hc("filter",n.ec(3,7,e.filter$)),n.Db(2),n.hc("ngIf",n.ec(5,9,e.selectedTodo$)),n.Db(6),n.hc("todos",n.ec(11,11,e.todosNotDone$))("selectedTodo",n.ec(12,13,e.selectedTodo$)),n.Db(6),n.hc("todos",n.ec(17,15,e.todosDone$))("selectedTodo",n.ec(18,17,e.selectedTodo$)),n.Db(4),n.hc("ngIf",n.ec(21,19,e.selectedTodo$)))},directives:[k,D.l,x,G],pipes:[D.b],encapsulation:2}),t})();o("FfVP");const J=[{path:"",component:M}];let _=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.Lb({type:t}),t.\u0275inj=n.Kb({imports:[[D.c,c.l,T.c,i.c.forRoot({icons:i.a,sizes:{md:"24px"}}),c.v,s.a.forChild(J)]]}),t})()}}]);